## 操作系统

### 一、计算机系统概述

##### 操作系统基本概念功能

- 定义：管理整个计算机硬件和软件资源，并合理的组织调度计算机的工作资源的分配，以提供给用户和软件方便的接口和环境，他是最基本的系统软件
- 系统资源的管理者
  - 处理机管理
  - 储存管理
  - 文件管理
  - 设备管理

- GUI
- 联机命令接口
- 脱机命令接口
- 程序接口

##### 操作系统的特征

- 并发（区别并行，并发是同一时间间隔内发生，微观上是交替发生）
- 共享（资源共享)
  - 互斥共享
  - 同时共享
- 虚拟
  - 空分复用技术
  - 时分复用技术
- 异步

##### 操作系统的发展和分类

- 手工操作阶段
- 批处理阶段
- 分时操作系统
- 实时操作系统

##### 操作系统的运行机制

- 内核程序
- 特权指令
- CPU内核态
- CPU用户态

##### 中断和异常

- 内中断（异常）
- 外中断 (时钟部件)

##### 系统调用

- 为什么需要系统调用
- 系统调用的过程

操作系统的体系结构

- 大内核
- 微内核

### 二、进程管理

##### 进程的概念和特征

- 程序：是静态的，存放在磁盘里可执行的文件
- 进程：是动态的是程序的一次执行过程
- 进程控制块PCB
- 程序段
- 数据段
- 进程的特征
  - 动态性
  - 并发性
  - 独立性
  - 异步性
  - 结构性

##### 进程的状态与转换

- 状态
  - 创建态
  - 就绪态
  - 运行态
  - 阻塞态
  - 终止态

##### 进程控制

- 如何进行控制（“原语”实现）

##### 进程通信

- 共享储存
  - 基于数据结构的共享
  - 基于存储区的共享
- 消息传递
  - 直接通信方式
  - 间接通信方式
- 管道通信（半双工通信）

##### 线程、多线程模型

- 线程是一个基本的CPU执行单元，也是程序执行流的最小单位
- 系统资源分配是进程
- 线程控制块（TCB）
- 线程实现方式
  - 用户级线程
  - 内核级线程

- 多线程模型
  - 一对一
  - 多对一
  - 多对多

##### 调度的概念和层次

- 调度（某种规则来决定任务处理的顺序）
- 高级调度（作业调度）
- 低级调度（进程调度）
- 中级调度（内存调度）（就绪挂起，阻塞挂起）

##### 进程调度的时机、切换与过程、进程调度方式

- 临界资源：一段时间内只允许一个进程使用的资源，各进程互斥地访问临界资源
- 临界区：访问临界资源的那段代码
- 进程调度的方式
  - 非剥夺调度方式（非抢占方式）
  - 剥夺调度方式（抢占方式）

- 调度算法的评价指标
  - CPU利用率：CPU处于忙碌的时间除以总时间
  - 系统吞吐量：单位时间内完成的作业数量
  - 周转时间：作业被提交到完成所用的时间
  - 带权周转时间：作业周转时间 / 作业实际运行时间
  - 等待时间：进程 / 作业处于等待处理机状态的时间之和
  - 响应时间：指用户提交请求到首次产生响应所用的时间

- 调度算法
  - 先来先服务（FCFS）
  - 短作业优先（SJF）注：抢占式优先最好或者几乎同时到达
  - 高响应比优先（HRRN）
  - 时间片轮转调度算法（分时操作系统）
  - 优先级调度算法（实时操作系统）
  - 多级反馈队列调度算法

###### 进程的同步、进程的互斥

##### 进程互斥地软件实现方法

- 单标志法

  - 算法思想：每个进程进入临界区的权限只能被另一个进程赋予
  - 缺点：违反了空闲让进的原则

- 双标志先检查

  - 先检查其它是否想使用，如果其它不想，则自己设置为想要使用，用完再解锁
  - 关键问题：检查和上锁不能一步完成
  - 缺点:违反了忙则等待的原则

- 双标志后检查

  - 算法思想：先上锁后检查
  - 缺点：违法了空闲让进和有限等待的原则

- Peterson算法

  - 算法思想：先表达想使用，在表达谦让

  - 缺点：没有遵循让权等待的原则

##### 进程互斥地硬件实现方法

- 中断屏蔽方法
  - 关中断
- TestAndSet(TS指令 / TSL指令)
- Swap指令（XCHG指令）

##### 信号量机制

- 整型信号量
  - 缺点：不满足让权等待
- 记录型信号量
- 实现进程互斥
- 实现进程同步（前v后p）
- 实现进程的前驱关系 
- 注:p操作时，互斥操作要在同步之后，否则会死锁

##### 管程

- 为什么要引入管程

##### 死锁

- 死锁条件
  - 互斥条件
  - 不可剥夺条件
  - 请求和保持的条件
  - 循环等待条件

- 死锁的处理策略
  - 预防死锁
    1. 破坏互斥条件
    2. 破坏不可剥夺条件
    3. 破坏请求和保持的条件
    4. 破坏循环等待的条件
  - 避免死锁
    1. 安全序列
    2. 银行家算法
  - 死锁的检测和解除
    1. 死锁的检测
    2. 死锁的解除

### 三、内存管理

##### 内存管理的基本概念

- 内存的分配和回收
  - 单一连续分配
  - 固定分区分配
  - 动态分区分配
- 内存扩展
  - 覆盖和交换技术
  - 虚拟存储技术
- 地址转换
- 内存保护

##### 动态分区分配算法

- 首次适应算法（位置先后）
- 最佳适应算法（容量大小）
- 最坏适应算法
- 邻近适应算法

##### 基本分页存储管理

- 基本地址变换机构
- 两级页表

##### 基本分段储存管理

##### 段页式管理方式

##### 虚拟内存

- 虚拟内存的特性
  - 多次性
  - 对换性
  - 虚拟性
- 请求分页管理
- 页面置换算法
  - 最佳置换算法(OPT)
  - 先进先出置换算法(FIFO)
  - 最近最久非使用置换算法（LRU）
  - 时钟置换算法(CLOCK)

##### 页面分配策略

- 驻留集：指请求分页储存管理中给进程分配的物理块的集合
- 固定分配
- 可变分配
- 局部置换
- 全局置换
- 预调页测策略
- 请求调页策略
- 抖动(颠簸)现象
- 工作集：指某段时间间隔内，进程实际访问页面的集合

